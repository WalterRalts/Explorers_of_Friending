--[[
    init.lua
    Created: 09/17/2024 15:27:51
    Description: Autogenerated script file for the map QuizTime.
]]--
-- Commonly included lua functions and data
require 'origin.common'

-- Package name
local QuizTime = {}

-------------------------------
-- Map Callbacks
-------------------------------
---QuizTime.Init(map)
--Engine callback function
function QuizTime.Init(map)

  local maru = CH("Maru")
  local azura = CH("Azura")
  local puchi = CH("Puchi")
  local senna = CH("Senna")
  local ziggy = CH("Ziggy")

  GAME:FadeIn(5)
  GAME:WaitFrames(10)
  outside_enter = 1
  UI:SetSpeaker(maru)
  UI:SetSpeakerEmotion("Surprised")
  UI:WaitShowDialogue("Whoa!")

  UI:SetSpeaker(puchi)
  UI:SetSpeakerEmotion("Pain")
  UI:WaitShowDialogue("[speed=0.6]Ack...[pause=30] too[emote=Dizzy] bright...!")

  GROUND:CharTurnToCharAnimated(senna, ziggy, 4)
  UI:SetSpeaker(senna)
  UI:SetSpeakerEmotion("Surprised")
  UI:WaitShowDialogue("Z-[pause=30]ziggy...! H[emote=Stunned]ow did you...?!")
  
  UI:SetSpeaker(ziggy)
  UI:SetSpeakerEmotion("Happy")
  UI:WaitShowDialogue("First question!")

  GROUND:CharTurnToCharAnimated(senna, puchi, 4)
  UI:SetSpeaker(senna)
  UI:SetSpeakerEmotion("Sigh")
  UI:WaitShowDialogue("[speed=0.7]Hm...")

  UI:SetSpeaker(ziggy)
  UI:SetSpeakerEmotion("Normal")
  UI:WaitShowDialogue("What color are the Tarro town flowers?")

  GROUND:CharTurnToCharAnimated(senna, ziggy, 4)
  UI:SetSpeaker(senna)
  UI:SetSpeakerEmotion("Stunned")
  UI:WaitShowDialogue("Those grow everywhere around here...")

  GROUND:CharTurnToCharAnimated(ziggy, senna, 4)
  UI:SetSpeaker(ziggy)
  UI:SetSpeakerEmotion("Normal")
  UI:WaitShowDialogue("Gotta make sure they're paying attention.")

  GROUND:CharTurnToCharAnimated(ziggy, maru, 4)
  UI:SetSpeaker(maru)
  UI:SetSpeakerEmotion("Worried")
    local choices = {("Blue!"),
        ("White!"), 
        ("Green!"), 
        ("Red!")}
    UI:BeginChoiceMenu("(What color were the flowers...?)", choices, 1, 4)
    UI:WaitForChoice()
    result = UI:ChoiceResult()
    if result == 2 then
        UI:SetSpeaker(ziggy)
        UI:SetSpeakerEmotion("Joyous")
        UI:WaitShowDialogue("Correct!")

        UI:SetSpeaker(puchi)
        UI:SetSpeakerEmotion("Pain")
        UI:WaitShowDialogue("...")

        UI:SetSpeaker(ziggy)
        UI:SetSpeakerEmotion("Joyous")
        UI:WaitShowDialogue("Now then...")
            
        GROUND:CharTurnToCharAnimated(ziggy, puchi, 4)
        UI:SetSpeaker(puchi)
        UI:SetSpeakerEmotion("Determined")
        UI:WaitShowDialogue("Too loud.")

        UI:SetSpeaker(ziggy)
        UI:SetSpeakerEmotion("Angry")
        UI:WaitShowDialogue("...")

        UI:SetSpeaker(puchi)
        UI:SetSpeakerEmotion("Pain")
        UI:WaitShowDialogue("...")

        UI:SetSpeaker(ziggy)
        UI:SetSpeakerEmotion("Normal")
        UI:WaitShowDialogue("What were Plus and Minus fighting about?")

        GROUND:CharTurnToCharAnimated(senna, ziggy, 4)
        COMMON.CharSweatdrop("Senna")
        UI:SetSpeaker(senna)
        UI:SetSpeakerEmotion("Sigh")
        UI:WaitShowDialogue("Ziggy...[pause=35] we just stopped that a few minutes ago...")

        GROUND:CharTurnToCharAnimated(ziggy, senna, 4)
        UI:SetSpeaker(ziggy)
        UI:SetSpeakerEmotion("Normal")
        UI:WaitShowDialogue("Yeah, well, it was in the town!")
        UI:SetSpeaker(maru)
        UI:SetSpeakerEmotion("Worried")
        local choices = {("Height!"),
            ("Flowers!"), 
            ("Color!"), 
            ("Speed!")}
        UI:BeginChoiceMenu("(What were they fighting about...?)", choices, 1, 4)
        UI:WaitForChoice()
        result = UI:ChoiceResult()
        if result == 1 then    
            UI:SetSpeaker(ziggy)
            UI:SetSpeakerEmotion("Stunned")
            UI:WaitShowDialogue("They're the same size, aren't they?")
    
            UI:SetSpeaker(puchi)
            UI:SetSpeakerEmotion("Worried")
            UI:WaitShowDialogue("Even then, they'd still fight about it...")
    
            UI:SetSpeaker(azura)
            UI:SetSpeakerEmotion("Stunned")
            UI:WaitShowDialogue("Yeesh...")

            UI:SetSpeaker(ziggy)
            UI:SetSpeakerEmotion("Normal")
            UI:WaitShowDialogue("Right,[pause=15] you guys can come back later and try it again.")
            quiz_done = 1
        elseif result == 2 then
            UI:SetSpeaker(senna)
            UI:SetSpeakerEmotion("Normal")
            UI:WaitShowDialogue("They all look the same.[pause=30] Doubt it.")
    
            UI:SetSpeaker(ziggy)
            UI:SetSpeakerEmotion("Stunned")
            UI:WaitShowDialogue("But some are taller than others...")
    
            UI:SetSpeaker(puchi)
            UI:SetSpeakerEmotion("Worried")
            UI:WaitShowDialogue("Would that really even matter...?")
    
            UI:SetSpeaker(ziggy)
            UI:SetSpeakerEmotion("Stunned")
            UI:WaitShowDialogue("...probably not.")
    
            UI:SetSpeaker(azura)
            UI:SetSpeakerEmotion("Stunned")
            UI:WaitShowDialogue("Yeesh...")

            UI:SetSpeaker(ziggy)
            UI:SetSpeakerEmotion("Normal")
            UI:WaitShowDialogue("Right,[pause=15] you guys can come back later and try it again.")
            quiz_done = 1
        elseif result == 3 then
            UI:SetSpeaker(ziggy)
            UI:SetSpeakerEmotion("Happy")
            UI:WaitShowDialogue("Well done, junior explorers!")

            UI:SetSpeaker(azura)
            UI:SetSpeakerEmotion("Joyous")
            UI:WaitShowDialogue("Yay!")

            UI:SetSpeaker(puchi)
            UI:SetSpeakerEmotion("Worried")
            UI:WaitShowDialogue("Don't you have any harder questions?")
    
            UI:SetSpeaker(ziggy)
            UI:SetSpeakerEmotion("Normal")
            UI:WaitShowDialogue("I'm willing to take any ideas.")

            UI:SetSpeaker(puchi)
            UI:SetSpeakerEmotion("Normal")
            UI:WaitShowDialogue("Which house is next to the [color=#01FE10]Big Tree[color]?")

            UI:SetSpeaker(ziggy)
            UI:SetSpeakerEmotion("Happy")
            UI:WaitShowDialogue("Ooh, yeah yeah! [emote=Normal]Just tell me what Pokemon shape it is.")

            UI:SetSpeaker(azura)
            UI:SetSpeakerEmotion("Worried")
            local choices = {("Togekiss!"),
                ("Linoone!"), 
                ("Azumarill!"), 
                ("Plusle and Minun!")}
            UI:BeginChoiceMenu("(What shape is the house next to [color=#01FE10]Tarro Tree[color]?)", choices, 1, 4)
            UI:WaitForChoice()
            result = UI:ChoiceResult()
            if result == 1 then
                UI:SetSpeaker(ziggy)
                UI:SetSpeakerEmotion("Happy")
                UI:WaitShowDialogue("Alright, three in a row!")
        
                UI:SetSpeaker(puchi)
                UI:SetSpeakerEmotion("Dizzy")
                UI:WaitShowDialogue("I'mma sleep now.")
        
                UI:SetSpeaker(ziggy)
                UI:SetSpeakerEmotion("Normal")
                UI:WaitShowDialogue("Nuh-uh.")
        
                UI:SetSpeaker(puchi)
                UI:SetSpeakerEmotion("Angry")
                UI:WaitShowDialogue("[speed=0.6].........")

                UI:SetSpeaker(ziggy)
                UI:SetSpeakerEmotion("Normal")
                UI:WaitShowDialogue("Speaking of,[pause=45] there are plenty of things to do in Tarro Town.")
                UI:WaitShowDialogue("You can do some cool stuff here,[pause=15] but the stores[emote=Inspired] are the best part about this place.")
                UI:WaitShowDialogue("So, how many stores are there in town if we aren't counting the ones in the [color=#01FE10]Tarro Tree[color]!")
                UI:SetSpeaker(maru)
                UI:SetSpeakerEmotion("Worried")
                local choices = {("2!"),
                    ("3!"), 
                    ("4!"), 
                    ("5!")}
                UI:BeginChoiceMenu("(How many stores are there...?)", choices, 1, 4)
                UI:WaitForChoice()
                result = UI:ChoiceResult()
                if result == 1 then
                    quiz_done = 2
                    UI:SetSpeaker(ziggy)
                    UI:SetSpeakerEmotion("Happy")
                    UI:WaitShowDialogue("Hahahaha!")
                    UI:WaitShowDialogue("I'm such a prankster, you guys got it wrooooong!")

                    UI:SetSpeaker(maru)
                    UI:SetSpeakerEmotion("Pain")
                    UI:WaitShowDialogue("So close...")

                    UI:SetSpeaker(senna)
                    UI:SetSpeakerEmotion("Worried")
                    UI:WaitShowDialogue("Wait... there's more than two?")

                    UI:SetSpeaker(ziggy)
                    UI:SetSpeakerEmotion("Worried")
                    UI:WaitShowDialogue("There's a shop to the right that literally just opened,[pause=23] like,[pause=23] yesterday,[pause=23] but[emote=Happy] it counts!")
                    UI:SetSpeakerEmotion("Joyous")
                    UI:WaitShowTimedDialogue("That mean I wiiiiii-!")
                    SV.tarro_town.PieChapter = 7
                    --explosion sound
                    SOUND:PlayBattleSE("DUN_Explosion")
                    GROUND:MoveScreen(RogueEssence.Content.ScreenMover(0, 8, 30))
                    SOUND:PlayBGM("None", true, 30)
                    GAME:EnterGroundMap("TarroTownSquare", "Quiz_Fail")
                elseif result == 2 then
                    quiz_done = 2
                    UI:SetSpeaker(ziggy)
                    UI:SetSpeakerEmotion("Happy")
                    UI:WaitShowDialogue("Hahahaha!")
                    UI:WaitShowDialogue("I'm such a prankster, you guys got it wr-[pause=100]! W[emote=Worried]ait, you said three? Darn, you're right.")

                    UI:SetSpeaker(senna)
                    UI:SetSpeakerEmotion("Worried")
                    UI:WaitShowTimedDialogue("Wait... there's more than tw-?")
                    SOUND:PlayBattleSE("DUN_Explosion")
                    GROUND:MoveScreen(RogueEssence.Content.ScreenMover(0, 8, 30))
                    SOUND:PlayBGM("None", true, 30)
                    SV.tarro_town.PieChapter = 7
                    GAME:EnterGroundMap("TarroTownSquare", "Quiz_Fail")
                else
                    GROUND:CharTurnToCharAnimated(senna, azura, 4)
                    GROUND:CharTurnToCharAnimated(puchi, azura, 4)
                    GROUND:CharTurnToCharAnimated(ziggy, azura, 4)
                    UI:SetSpeaker(ziggy)
                    UI:SetSpeakerEmotion("Happy")
                    UI:WaitShowTimedDialogue("Oof,[pause=25] so close.")
                    UI:SetSpeakerEmotion("Normal")
                    UI:WaitShowDialogue("But since you're wrong, you can come back later and try again.")
                    quiz_done = 1
                end
            elseif result == 2 then
                COMMON.CharSweatdrop("Senna")
                UI:SetSpeaker(senna)
                UI:SetSpeakerEmotion("Stunned")
                UI:WaitShowTimedDialogue("That's [speed=0.6]not...?")

                UI:SetSpeaker(ziggy)
                UI:SetSpeakerEmotion("Inspired")
                UI:WaitShowDialogue("We live next to the [color=#01FE10]Big Tree[color]?!")

                UI:SetSpeaker(senna)
                UI:SetSpeakerEmotion("Worried")
                UI:WaitShowDialogue("No, Ziggy...")

                UI:SetSpeaker(ziggy)
                UI:SetSpeakerEmotion("Sad")
                UI:WaitShowDialogue("Aww...")
                UI:WaitShowDialogue("I'm sorry... [pause=55]but you got it wrong...")
                UI:SetSpeakerEmotion("Teary-Eyed")
                UI:WaitShowDialogue("[speed=0.6]You can...[pause=55] try again... [pause=43]*sniffle*...")

                UI:SetSpeaker(senna)
                UI:SetSpeakerEmotion("Worried")
                UI:WaitShowDialogue("Aww... Ziggy.")
                quiz_done = 1
            elseif result == 3 then
                COMMON.CharSweatdrop("Senna")
                COMMON.CharSweatdrop("Ziggy")
                COMMON.CharSweatdrop("Puchi")
                GROUND:CharTurnToCharAnimated(senna, azura, 4)
                GROUND:CharTurnToCharAnimated(puchi, azura, 4)
                GROUND:CharTurnToCharAnimated(ziggy, azura, 4)
                UI:SetSpeaker(ziggy)
                UI:SetSpeakerEmotion("Stunned")
                UI:WaitShowDialogue("Azu... that's your house.")

                UI:SetSpeaker(senna)
                UI:SetSpeakerEmotion("Happy")
                UI:WaitShowDialogue("You got nervous there, Azura?")

                UI:SetSpeaker(azura)
                UI:SetSpeakerEmotion("Worried")
                UI:WaitShowDialogue("Hehe...[pause=45] w[emote=Stunned]hoops...")

                UI:SetSpeaker(ziggy)
                UI:SetSpeakerEmotion("Happy")
                UI:WaitShowDialogue("I'd want to be next to it, too. But since you're wrong, you can come back later and try again.")
                quiz_done = 1
            elseif result == 4 then
                GROUND:CharTurnToCharAnimated(senna, azura, 4)
                GROUND:CharTurnToCharAnimated(puchi, azura, 4)
                GROUND:CharTurnToCharAnimated(ziggy, azura, 4)
                UI:SetSpeaker(ziggy)
                UI:SetSpeakerEmotion("Happy")
                UI:WaitShowTimedDialogue("Oof,[pause=25] so close.")
                UI:SetSpeakerEmotion("Normal")
                UI:WaitShowDialogue("But since you're wrong, you can come back later and try again.")
                quiz_done = 1
            end
        elseif result == 4 then
            UI:SetSpeaker(ziggy)
            UI:SetSpeakerEmotion("Happy")
            UI:WaitShowDialogue("Nope, that was last week![pause=30] Haha!")
    
            UI:SetSpeaker(puchi)
            UI:SetSpeakerEmotion("Determined")
            UI:WaitShowDialogue("How come I wasn't woken up for that one?")
    
            UI:SetSpeaker(ziggy)
            UI:SetSpeakerEmotion("Stunned")
            UI:WaitShowDialogue("Uh, well... i-it... uh...")
    
            UI:SetSpeaker(puchi)
            UI:SetSpeakerEmotion("Angry")
            UI:WaitShowDialogue("Grrrrr...!")
    
            UI:SetSpeaker(ziggy)
            UI:SetSpeakerEmotion("Pain")
            UI:WaitShowDialogue("Eep!")
    
            UI:SetSpeaker(senna)
            UI:SetSpeakerEmotion("Stunned")
            UI:WaitShowDialogue("Oooo[pause=15]kaaaaay,[pause=30] y[emote=Happy]ou two can come back and try again.")
    
            UI:SetSpeaker(puchi)
            UI:SetSpeakerEmotion("Determined")
            UI:WaitShowDialogue("You [pause=25]o[emote=Angry]we me, Ziggy...!")

            UI:SetSpeaker(ziggy)
            UI:SetSpeakerEmotion("Normal")
            UI:WaitShowDialogue("Nope, nuh-uh, can't hear you.")
            quiz_done = 1
        end
    else
        UI:SetSpeaker(ziggy)
        UI:SetSpeakerEmotion("Normal")
        UI:WaitShowDialogue("That's...[pause=45] wrong.[emote=Worried]")
        UI:SetSpeakerEmotion("Stunned")
        UI:WaitShowDialogue("Like, really wrong.")

        UI:SetSpeaker(senna)
        UI:SetSpeakerEmotion("Happy")
        UI:WaitShowDialogue("Didn't think you'd miss that one...")

        UI:SetSpeaker(ziggy)
        UI:SetSpeakerEmotion("Normal")
        UI:WaitShowDialogue("You guys must be rushing![pause=0] Go explore for real and come back for a rematch!")
        quiz_done = 1
    end
    GAME:EnterGroundMap("TarroTownSquare", "Quiz_Fail")
end

---QuizTime.Enter(map)
--Engine callback function
function QuizTime.Enter(map)

  GAME:FadeIn(20)

end

---QuizTime.Exit(map)
--Engine callback function
function QuizTime.Exit(map)


end

---QuizTime.Update(map)
--Engine callback function
function QuizTime.Update(map)


end

---QuizTime.GameSave(map)
--Engine callback function
function QuizTime.GameSave(map)


end

---QuizTime.GameLoad(map)
--Engine callback function
function QuizTime.GameLoad(map)

  GAME:FadeIn(20)

end

-------------------------------
-- Entities Callbacks
-------------------------------


return QuizTime

