--[[
    init.lua
    Created: 10/24/2025 23:44:42
    Description: Autogenerated script file for the map DesertS.
]]--
-- Commonly included lua functions and data
require 'explorers_of_friending.common'
require 'explorers_of_friending.ground.DesertS.cutscene'
-- Package name
local DesertS = {}

-------------------------------
-- Map Callbacks
-------------------------------
---DesertS.Init(map)
--Engine callback function
function DesertS.Init(map)
  COMMON.RespawnAllies()
  if SV.hertz_town.desert_scene == true then
    Desert.KassyMeet()
  else
    GROUND:TeleportTo(CH("Teammate1"), CH("PLAYER").Position.X, CH("PLAYER").Position.Y, Dir8.DownRight, 0)
    GROUND:TeleportTo(CH("Teammate2"), CH("PLAYER").Position.X, CH("PLAYER").Position.Y, Dir8.UpRight, 0)
    GROUND:Hide("Kassy")
  end
  CH("Teammate1").CollisionDisabled = true
  CH("Teammate2").CollisionDisabled = true
  AI:SetCharacterAI(CH("Teammate1"), "origin.ai.ground_partner", CH('PLAYER'), CH("Teammate1").Position)
  AI:SetCharacterAI(CH("Teammate2"), "origin.ai.ground_partner", CH("Teammate1"), CH("Teammate2").Position)
end

---DesertS.Enter(map)
--Engine callback function
function DesertS.Enter(map)

  GAME:FadeIn(20)

end

---DesertS.Exit(map)
--Engine callback function
function DesertS.Exit(map)


end

---DesertS.Update(map)
--Engine callback function
function DesertS.Update(map)
  Partner()
end

---DesertS.GameSave(map)
--Engine callback function
function DesertS.GameSave(map)


end

---DesertS.GameLoad(map)
--Engine callback function
function DesertS.GameLoad(map)

  GAME:FadeIn(20)

end

-------------------------------
-- Entities Callbacks
-------------------------------

function DesertS.cactus4_Action(obj, activator)
  if activator.Nickname == "Rexio" then
    UI:SetSpeaker(activator)
    UI:SetSpeakerEmotion("Normal")
    UI:WaitShowDialogue("(Cactus. Because it's a desert. Wow.)")
  elseif activator.Nickname == "Maru" then
    UI:SetSpeaker(activator)
    UI:SetSpeakerEmotion("Normal")
    UI:WaitShowDialogue("(What a weird looking cactus.)")
  else
    UI:SetSpeaker(activator)
    UI:SetSpeakerEmotion("Happy")
    UI:WaitShowDialogue("(Four!)")
  end
end

function DesertS.Tumbleweed_Action(obj, activator)
  if activator.Nickname == "Rexio" then
    UI:SetSpeaker(activator)
    UI:SetSpeakerEmotion("Normal")
    UI:WaitShowDialogue("(Tumbelweed. Because it's a desert. Neat.)")
  elseif activator.Nickname == "Maru" then
    UI:SetSpeaker(activator)
    UI:SetSpeakerEmotion("Normal")
    UI:WaitShowDialogue("(Looks like it got stuck in the sand.)")
  else
    UI:SetSpeaker(activator)
    UI:SetSpeakerEmotion("Inspired")
    UI:WaitShowDialogue("(Whoa... what's this thing.)")
  end
end

-- Entrances

function DesertS.W_Touch(obj, activator)
  COMMON.FadeEnterGround("DesertSW", "EastEnter")
end

function DesertS.NW_Touch(obj, activator)
  COMMON.FadeEnterGround("DesertNW", "SouthEastEnter")
end

function DesertS.N_Touch(obj, activator)
  COMMON.FadeEnterGround("DesertN", "SouthEnter")
end

function DesertS.NE_Touch(obj, activator)
  COMMON.FadeEnterGround("DesertNE", "SouthWestEnter")
end

function DesertS.E_Touch(obj, activator)
  COMMON.FadeEnterGround("DesertSE", "WestEnter")
end

return DesertS

