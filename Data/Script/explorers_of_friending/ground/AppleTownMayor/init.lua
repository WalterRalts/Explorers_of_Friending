--[[
    init.lua
    Created: 09/20/2025 23:00:08
    Description: Autogenerated script file for the map AppleTownMayor.
]]--
-- Commonly included lua functions and data
require 'explorers_of_friending.common'

-- Package name
local AppleTownMayor = {}

-------------------------------
-- Map Callbacks
-------------------------------
---AppleTownMayor.Init(map)
--Engine callback function
function AppleTownMayor.Init(map)


end

---AppleTownMayor.Enter(map)
--Engine callback function
function AppleTownMayor.Enter(map)

  GAME:FadeIn(20)

end

---AppleTownMayor.Exit(map)
--Engine callback function
function AppleTownMayor.Exit(map)


end

---AppleTownMayor.Update(map)
--Engine callback function
function AppleTownMayor.Update(map)
  Partner()
end

---AppleTownMayor.GameSave(map)
--Engine callback function
function AppleTownMayor.GameSave(map)


end

---AppleTownMayor.GameLoad(map)
--Engine callback function
function AppleTownMayor.GameLoad(map)

  GAME:FadeIn(20)

end

-------------------------------
-- Entities Callbacks
-------------------------------
function AppleTownMayor.MayorEnter_Touch(obj, activator)
  GAME:FadeOut(false, 20)
  GAME:EnterGroundMap("AppleMayor", "Enter")
end

function AppleTownMayor.AppleTownEntrance_Touch(obj, activator)
  GAME:FadeOut(false, 20)
  GAME:EnterGroundMap("AppleTown", "Enter2")
end

function AppleTownMayor.Biubin_Action(obj, activator)
  COMMON.SetCharAndEmotion(obj, "Stunned")
  UI:WaitShowDialogue("My brother is the mayor for today.")
  UI:WaitShowDialogue("We couldn't decide who could lead better, so we just switch everyday.")
end

function AppleTownMayor.Candle_Action(obj, activator)
  local flame = CH("Flame")
  local wax = CH("Wax")

  COMMON.SetCharAndEmotion(obj, "Happy")
  UI:WaitShowDialogue("I can't wait to work today! We're gonna scare everyone!")

  COMMON.CharSweatdrop("Flame")
  COMMON.SetCharAndEmotion(flame, "Worried")
  UI:WaitShowDialogue("...we'd probably get in trouble...")

  COMMON.SetCharAndEmotion(wax, "Normal")
  UI:WaitShowDialogue("Okay???[pause=40] Just don't get caught???[pause=55] Turn invisible like the ghost you are???")
end

function AppleTownMayor.Flame_Action(obj, activator)
  AppleTownMayor.Candle_Action(CH("Candle"), activator)
end

function AppleTownMayor.Wax_Action(obj, activator)
  AppleTownMayor.Candle_Action(CH("Candle"), activator)
end

return AppleTownMayor

