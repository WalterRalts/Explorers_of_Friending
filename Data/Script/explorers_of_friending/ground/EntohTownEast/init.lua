--[[
    init.lua
    Created: 06/18/2025 19:16:47
    Description: Autogenerated script file for the map EntohTownEast.
]]--
-- Commonly included lua functions and data
require 'explorers_of_friending.common'
require 'explorers_of_friending.ground.EntohTownEast.cutscene'

-- Package name
local EntohTownEast = {}

-------------------------------
-- Map Callbacks
-------------------------------
---EntohTownEast.Init(map)
--Engine callback function
function EntohTownEast.Init(map)
  COMMON.RespawnAllies()
  local tidy = CH("Teammate1")
  local flow = CH("Teammate2")
  if SV.entoh_town.firstfind == 0 or SV.entoh_town.firstfind == 1 then
    East.TidyUp()
    if SV.entoh_town.firstfind == 0 then
      SV.entoh_town.firstfind = 2
    end
  else
    if OutEnter == 1 then
      tidy.CollisionDisabled = true
      flow.CollisionDisabled = true
      GROUND:TeleportTo(tidy, 60, 200, Direction.Left, 0)
      GROUND:TeleportTo(flow, 60, 210, Direction.Left, 0)
    end
    AI:SetCharacterAI(tidy, "origin.ai.ground_partner", CH('PLAYER'), tidy.Position)
    AI:SetCharacterAI(flow, "origin.ai.ground_partner", tidy, flow.Position)
  end
  TidyRexTalk = 0
end

---EntohTownEast.Enter(map)
--Engine callback function
function EntohTownEast.Enter(map)
  if not Todungeonscene then
    GAME:FadeIn(20)
  else
    Todungeonscene = true
  end
end

---EntohTownEast.Exit(map)
--Engine callback function
function EntohTownEast.Exit(map)


end

---EntohTownEast.Update(map)
--Engine callback function
function EntohTownEast.Update(map)


end

---EntohTownEast.GameSave(map)
--Engine callback function
function EntohTownEast.GameSave(map)


end

---EntohTownEast.GameLoad(map)
--Engine callback function
function EntohTownEast.GameLoad(map)

  GAME:FadeIn(20)

end

-------------------------------
-- Entities Callbacks
-------------------------------

function EntohTownEast.Entoh_CenterEnter_Touch(obj, activator)
  OutEnter = 1
  GAME:EnterGroundMap("EntohTownCenter_ch2", "EasternMarker")
end

return EntohTownEast

